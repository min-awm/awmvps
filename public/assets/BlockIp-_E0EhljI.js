import{u as x,r as u,b as d,A as p,o as r,c as n,a as o,w as y,f as I,v,h as m,i as f,k,F as w,j as _,t as B}from"./index-CDvfFfFm.js";import{P}from"./plus-g_L8IEEg.js";import{T as $}from"./trash-DZ0LvIuN.js";const D={class:"m-2 bg-white border rounded-md p-9"},T={class:"mb-6 overflow-hidden bg-white rounded-lg shadow-sm"},L={class:"p-4 border-b border-gray-200 sm:p-6"},C={class:"flex-grow"},V={type:"submit",class:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},A={class:"p-4 sm:p-6"},F={key:0,class:"divide-y divide-gray-200"},N={class:"text-gray-900"},O=["onClick"],E={key:1,class:"py-4 text-center text-gray-500"},R={__name:"BlockIp",setup(K){const l=x(),c=u([]),a=u("");i();async function i(){try{const e=await d.get(`${p.LIST_BLOCK_IP}`);e.success?c.value=[...e.message.trim().split(`
`)].filter(s=>s!==""):console.log(`BlockIp: ${e.message}`)}catch(e){console.log(`BlockIp: ${e}`)}}async function h(){try{const e=new FormData;e.append("ip",a.value);const s=await d.post(`${p.ADD_BLOCK_IP}`,e);s.success?(a.value="",l.success("Thêm ip thành công"),i()):(l.error("Lỗi thêm ip"),console.log(`BlockIp: ${s.message}`))}catch(e){console.log(`BlockIp: ${e}`)}}async function g(e){try{const s=new FormData;s.append("ip",e);const t=await d.post(`${p.REMOVE_BLOCK_IP}`,s);t.success?(l.success("Xóa ip thành công"),i()):(l.error("Lỗi xóa ip"),console.log(`BlockIp: ${t.message}`))}catch(s){console.log(`BlockIp: ${s}`)}}return(e,s)=>(r(),n("div",D,[s[5]||(s[5]=o("h1",{class:"mb-6 text-3xl font-bold text-gray-900"},"Chặn IP",-1)),o("div",T,[o("div",L,[s[3]||(s[3]=o("h2",{class:"mb-4 text-xl font-semibold text-gray-900"}," Thêm địa chỉ IP chặn ",-1)),o("form",{onSubmit:y(h,["prevent"]),class:"flex flex-col gap-4 sm:flex-row"},[o("div",C,[s[1]||(s[1]=o("label",{for:"ip-address",class:"sr-only"},"Địa chỉ IP",-1)),I(o("input",{id:"ip-address","onUpdate:modelValue":s[0]||(s[0]=t=>a.value=t),type:"text",placeholder:"Nhập địa chỉ IP",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"},null,512),[[v,a.value]])]),o("button",V,[m(f(P),{class:"w-5 h-5 mr-2"}),s[2]||(s[2]=k(" Thêm "))])],32)]),o("div",A,[s[4]||(s[4]=o("h2",{class:"mb-4 text-xl font-semibold text-gray-900"}," Danh sách IP chặn ",-1)),c.value.length?(r(),n("ul",F,[(r(!0),n(w,null,_(c.value,(t,b)=>(r(),n("li",{key:`BLockIp-blockedIps-${b}`,class:"flex items-center justify-between py-4"},[o("span",N,B(t),1),o("button",{onClick:M=>g(t),class:"ml-4 text-red-600 hover:text-red-800 focus:outline-none focus:underline"},[m(f($),{class:"w-5 h-5"})],8,O)]))),128))])):(r(),n("p",E," Hiện tại không có địa chỉ IP nào bị chặn. "))])])]))}};export{R as default};
